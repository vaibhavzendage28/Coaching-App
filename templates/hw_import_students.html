{% extends "base.html" %}
{% block content %}
<div class="container py-3">
  <h3 class="mb-1">Bulk Import â€” Students</h3>
  <p class="text-muted mb-3">Add students to class: <span class="fw-semibold">{{ class_name }}</span></p>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="card shadow-sm border-0 rounded-3">
    <div class="card-body">
      <form method="post" enctype="multipart/form-data" class="row g-3">
        <input type="hidden" name="class_name" value="{{ class_name }}">
        <div class="col-md-8">
          <label class="form-label fw-semibold">Upload CSV (names only)</label>
          <input type="file" name="file" accept=".csv,text/csv" class="form-control" required>
          <div class="form-text">
            CSV can be either:
            <ul class="mb-0">
              <li>With header: <code>name</code></li>
              <li>Or no header: first column treated as name</li>
            </ul>
          </div>
        </div>
        <div class="col-md-4 d-grid align-items-end">
          <button class="btn btn-primary">
            <i class="bi bi-upload"></i> Import into {{ class_name }}
          </button>
        </div>
      </form>

      <hr>

</pre>
    <a class="btn btn-secondary ms-2" href="{{ url_for('hw_tracker', class_name=class_name) }}">Back to HW Tracker</a>
    </div>
  </div>
</div>
{% endblock %}
